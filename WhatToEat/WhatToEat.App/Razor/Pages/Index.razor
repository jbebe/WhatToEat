@page "/"
@using WhatToEat.App.Services;
@using WhatToEat.App.Services.Models;
@using WhatToEat.App.Storage.Model;
@using WhatToEat.App.Storage.Repositories;
@inherits BaseComponent;

<PageTitle>What To Eat</PageTitle>

<MudGrid Class="top-section">
	<MudItem xs="12" sm="6" md="6">
		<RestaurantList />
	</MudItem>
	<MudItem xs="12" sm="6" md="6">
		<VoteResult />
		Presence list
		Statistics
	</MudItem>
</MudGrid>

@code {
	[Inject]
	SessionService SessionService { get; set; } = default!;

	[Inject]
	NavigationManager NavManager { get; set; } = default!;

	[Inject]
	GlobalEventService GlobalEventService { get; set; } = default!;

	[Inject]
	LocalEventService LocalEventService { get; set; } = default!;

	protected override void OnAfterRender(bool firstRender)
	{
		if (!SessionService.IsLoggedIn)
		{
			NavManager.NavigateTo("/login");
		}
	}
}