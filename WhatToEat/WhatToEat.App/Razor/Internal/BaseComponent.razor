@implements IDisposable

@code
{
    [Inject]
    CancellationTokenSource CancellationTokenSource { get; set; } = default!;

    protected CancellationToken CancellationToken => CancellationTokenSource.Token;

    protected bool IsRoot { get; set; } = false;

    protected void SetRoot() => IsRoot = true;

    public void Dispose()
    {
        if (IsRoot && !CancellationTokenSource.IsCancellationRequested)
        {
            CancellationTokenSource.Cancel();
            CancellationTokenSource.Dispose();
        }
    }
}