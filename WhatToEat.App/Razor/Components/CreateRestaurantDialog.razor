@using WhatToEat.App.Services.Models;
@using WhatToEat.App.Storage.Model;
<MudDialog>
    <DialogContent>
        <EditForm Model="@Model" OnValidSubmit="OnValidSubmit">
            <DataAnnotationsValidator />
            <MudGrid>
                <MudItem>
                    <MudCard>
                        <MudCardContent>
                            <MudTextField Label="Name" Class="mt-3"
                                          @bind-Value="Model.Name" For="@(() => Model.Name)" />
                            <MudCheckBox @bind-Checked="Model.CashPayment" For="@(() => Model.CashPayment)" Label="Cash" />
                            <MudCheckBox @bind-Checked="Model.BankCardPayment" For="@(() => Model.BankCardPayment)" Label="Bank card" />
                            <MudCheckBox @bind-Checked="Model.SzepCardPayment" For="@(() => Model.SzepCardPayment)" Label="SZÉP card" />
                            <MudToggleIconButton @bind-Toggled="Model.DineIn" Color="@Color.Default" ToggledColor="@Color.Primary" Icon="@Icons.Material.Filled.LocalDining" ToggledIcon="@Icons.Material.Filled.LocalDining" Title="Dine-in" />
                            <MudToggleIconButton @bind-Toggled="Model.Takeaway" Color="@Color.Default" ToggledColor="@Color.Primary" Icon="@Icons.Material.Filled.TakeoutDining" ToggledIcon="@Icons.Material.Filled.TakeoutDining" Title="Takeaway" />
                            <MudToggleIconButton @bind-Toggled="Model.Delivery" Color="@Color.Default" ToggledColor="@Color.Primary" Icon="@Icons.Material.Filled.DeliveryDining" ToggledIcon="@Icons.Material.Filled.DeliveryDining" Title="Delivery" />
                        </MudCardContent>
                        <MudCardActions>
                            <MudButton ButtonType="ButtonType.Submit" Variant="Variant.Filled"
                                       Color="Color.Primary" Class="ml-auto">Create</MudButton>
                        </MudCardActions>
                    </MudCard>
                </MudItem>
            </MudGrid>
        </EditForm>
    </DialogContent>
</MudDialog>

@code {
    [Inject]
    ISnackbar Snackbar { get; set; } = default!;

    RestaurantForm Model = new RestaurantForm { Name = "", CashPayment = false, BankCardPayment = false, SzepCardPayment = false, DineIn = false, Takeaway = false, Delivery = false };

    public bool FormSuccess { get; set; }

    public bool CheckboxSuccess { get; set; }

    [CascadingParameter] MudDialogInstance MudDialog { get; set; } = default!;

    void OnValidSubmit(EditContext context)
    {
        Snackbar.Add("Restaurant created", Severity.Success);
        MudDialog.Close(DialogResult.Ok(Model));
    }
}
